
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://remyfp.github.io/CLT_BaseModel_Docs/math_transitions/">
      
      
        <link rel="prev" href="..">
      
      
        <link rel="next" href="../math_flu_components/">
      
      
      <link rel="icon" href="../img/favicon.ico">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.44">
    
    
      
        <title>Stochastic Transitions - City-level Transmission Toolkit</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.0253249f.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#stochastic-transitions" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="City-level Transmission Toolkit" class="md-header__button md-logo" aria-label="City-level Transmission Toolkit" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            City-level Transmission Toolkit
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Stochastic Transitions
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



  

<nav class="md-nav md-nav--primary md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="City-level Transmission Toolkit" class="md-nav__button md-logo" aria-label="City-level Transmission Toolkit" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    City-level Transmission Toolkit
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
    
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1" checked>
        
          
          <label class="md-nav__link" for="__nav_1" id="__nav_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    CLT Toolkit
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            CLT Toolkit
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Stochastic Transitions
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Stochastic Transitions
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#marginal-transition-types" class="md-nav__link">
    <span class="md-ellipsis">
      Marginal transition types
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#joint-transition-types" class="md-nav__link">
    <span class="md-ellipsis">
      Joint transition types
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#important-notes" class="md-nav__link">
    <span class="md-ellipsis">
      Important notes
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    MetroFluSim
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            MetroFluSim
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../math_flu_components/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    MetroFluSim Mathematical Formulation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../flu_input_requirements/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Math-to-Code Input Mappings
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Code API Reference
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Code API Reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../clt_base_package_reference.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    None
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../flu_components_reference/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Flu Core API Reference
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Python for Modelers
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Python for Modelers
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../python_resources.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    None
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="stochastic-transitions">Stochastic Transitions</h1>
<blockquote>
<p><strong><em>Written by LP, updated 01/30/2025</em></strong> </p>
</blockquote>
<h2 id="marginal-transition-types">Marginal transition types</h2>
<p>Our codebase currently implements six types of transitions: three stochastic transitions and three deterministic counterparts.</p>
<p>First we consider marginal (not joint) transition variables. For the following table, consider <span class="arithmatex">\(y_{\texttt{C}\rightarrow\texttt{C}^\prime, a, \ell}\left(\boldsymbol{\mathcal X}(t), \Delta t, \omega\right)\)</span> from compartment <span class="arithmatex">\(\texttt{C}\)</span> to <span class="arithmatex">\(\texttt{C}^\prime\)</span>. Let <span class="arithmatex">\(\texttt{b} = \texttt{b}_{a, \ell}(t)\)</span> be its current value of its base count and <span class="arithmatex">\(\texttt{r} = \texttt{r}_{a, \ell}(t)\)</span> be its current value of its rate. Then depending on its transition type, its distribution (or deterministic value) is given below.</p>
<p>Note that <span class="arithmatex">\(\alpha\)</span> is a function that converts a "rate" into a probability. It is given by:
$$
\alpha(\texttt{r}, \Delta t) = 1 - \exp(-\texttt{r} \cdot \Delta t)
$$
and corresponds to the probability that a Poisson process with rate <span class="arithmatex">\(\texttt{r}\)</span> produces at least one event in an interval of length <span class="arithmatex">\(\Delta t\)</span>. </p>
<p>The following table provides the mathematical distribution or deterministic output for each transition type. </p>
<table>
<thead>
<tr>
<th></th>
<th>Output</th>
</tr>
</thead>
<tbody>
<tr>
<td>Binomial</td>
<td><span class="arithmatex">\(\sim \text{Binom}\left(n = \texttt{b}, p = \alpha(\texttt{r}, \Delta t)\right)\)</span></td>
</tr>
<tr>
<td>Binomial  Taylor Approx</td>
<td><span class="arithmatex">\(\sim \text{Binom}\left(n = \texttt{b}, p = \texttt{r} \cdot \Delta t\right)\)</span></td>
</tr>
<tr>
<td>Poisson</td>
<td><span class="arithmatex">\(\sim \text{Poisson}\left(\lambda = \texttt{b} \cdot \texttt{r} \cdot \Delta t\right)\)</span></td>
</tr>
<tr>
<td>Binomial Deterministic</td>
<td><span class="arithmatex">\(\texttt{b} \cdot \alpha(\texttt{r}, \Delta t)\)</span></td>
</tr>
<tr>
<td>Binomial Taylor Approx Deterministic</td>
<td><span class="arithmatex">\(\texttt{b} \cdot \texttt{r} \cdot \Delta t\)</span></td>
</tr>
<tr>
<td>Poisson Deterministic</td>
<td><span class="arithmatex">\(\texttt{b} \cdot \texttt{r} \cdot \Delta t\)</span></td>
</tr>
</tbody>
</table>
<h2 id="joint-transition-types">Joint transition types</h2>
<p>Here we describe joint transition variables. For the following table, consider a compartment <span class="arithmatex">\(\texttt{C}_0\)</span> with two outgoing compartments, <span class="arithmatex">\(\texttt{C}_1\)</span> and <span class="arithmatex">\(\texttt{C}_2\)</span>. We describe <span class="arithmatex">\(2\)</span> transition variables: <span class="arithmatex">\(y_{\texttt{C}_0\rightarrow\texttt{C}_1, a, \ell}\left(\boldsymbol{\mathcal X}(t), \Delta t, \omega\right)\)</span> and <span class="arithmatex">\(y_{\texttt{C}_0\rightarrow\texttt{C}_2, a, \ell}\left(\boldsymbol{\mathcal X}(t), \Delta t, \omega\right)\)</span>. They respectively correspond to the number of people that transition from <span class="arithmatex">\(\texttt{C}_0\)</span> to <span class="arithmatex">\(\texttt{C}_1\)</span> and the number that transition from <span class="arithmatex">\(\texttt{C}_0\)</span> to <span class="arithmatex">\(\texttt{C}_2\)</span> at a given simulate state. Let their rates be <span class="arithmatex">\(\texttt{r}_1\)</span> and <span class="arithmatex">\(\texttt{r}_2\)</span> respectively.  </p>
<p>We can also write the number that remain in <span class="arithmatex">\(\texttt{C}_0\)</span> explicitly as 
<span class="arithmatex">\(y_{\texttt{C}_0\rightarrow\texttt{C}_0, a, \ell}\left(\boldsymbol{\mathcal X}(t), \Delta t, \omega\right) = \texttt{C}_{0, a, \ell}(t) - y_{\texttt{C}_0\rightarrow\texttt{C}_1, a, \ell}\left(\boldsymbol{\mathcal X}(t), \Delta t, \omega\right) - y_{\texttt{C}_0\rightarrow\texttt{C}_2, a, \ell}\left(\boldsymbol{\mathcal X}(t), \Delta t, \omega\right)\)</span>. Note that this quantity is purely for parametrizing multinomial distributions (which needs to have its probability parameters sum to <span class="arithmatex">\(1\)</span>) and does not need to be literally modeled as a transition variable either mathematically or in code. </p>
<p>Let <span class="arithmatex">\(\alpha\)</span> be defined as in the previous section on marginal transition types.</p>
<p>The following table gives the parameters for multinomial transitions when <span class="arithmatex">\(\texttt{C}_0\)</span> has two outgoing compartments <span class="arithmatex">\(\texttt{C}_1\)</span> and <span class="arithmatex">\(\texttt{C}_2\)</span>. The values <span class="arithmatex">\([y_{\texttt{C}_0\rightarrow\texttt{C}_1, a, \ell}\left(\boldsymbol{\mathcal X}(t), \Delta t, \omega\right)\)</span>, <span class="arithmatex">\(y_{\texttt{C}_0\rightarrow\texttt{C}_2, a, \ell}\left(\boldsymbol{\mathcal X}(t), \Delta t, \omega\right)\)</span>, <span class="arithmatex">\(y_{\texttt{C}_0\rightarrow\texttt{C}_0, a, \ell}\left(\boldsymbol{\mathcal X}(t), \Delta t, \omega\right)]\)</span> are sampled jointly, using <span class="arithmatex">\(\texttt{b} = \texttt{b}_{a, \ell}(t) = \texttt{C}_{0, a, \ell}(t)\)</span> as the "number of trials" parameter <span class="arithmatex">\(n\)</span> in a multinomial distribution.</p>
<table>
<thead>
<tr>
<th style="text-align: center;">Transition  Variable Group (Jointly Sampled)</th>
<th style="text-align: center;">Multinomial Probability Parameter</th>
<th style="text-align: center;">Multinomial with Taylor Approx Probability Parameter</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;"><span class="arithmatex">\(y_{\texttt{C}_0\rightarrow\texttt{C}_1, a, \ell}\left(\boldsymbol{\mathcal X}(t), \Delta t, \omega\right)\)</span></td>
<td style="text-align: center;"><span class="arithmatex">\(\frac{\texttt{r}_1}{\texttt{r}_1 + \texttt{r}_2} \alpha(\texttt{r}_1 + \texttt{r}_2, \Delta t)\)</span></td>
<td style="text-align: center;"><span class="arithmatex">\(\texttt{r}_1 \cdot \Delta t\)</span></td>
</tr>
<tr>
<td style="text-align: center;"><span class="arithmatex">\(y_{\texttt{C}_0\rightarrow\texttt{C}_2, a, \ell}\left(\boldsymbol{\mathcal X}(t), \Delta t, \omega\right)\)</span></td>
<td style="text-align: center;"><span class="arithmatex">\(\frac{\texttt{r}_2}{\texttt{r}_1 + \texttt{r}_2} \alpha(\texttt{r}_1 + \texttt{r}_2, \Delta t)\)</span></td>
<td style="text-align: center;"><span class="arithmatex">\(\texttt{r}_2 \cdot \Delta t\)</span></td>
</tr>
<tr>
<td style="text-align: center;"><span class="arithmatex">\(y_{\texttt{C}_0\rightarrow\texttt{C}_0, a, \ell}\left(\boldsymbol{\mathcal X}(t), \Delta t, \omega\right)\)</span></td>
<td style="text-align: center;"><span class="arithmatex">\(1 - \alpha(\texttt{r}_1 + \texttt{r}_2, \Delta t)\)</span></td>
<td style="text-align: center;"><span class="arithmatex">\(1 - (\texttt{r}_1 + \texttt{r}_2) \Delta t\)</span></td>
</tr>
</tbody>
</table>
<h2 id="important-notes">Important notes</h2>
<ul>
<li>
<p>The transition variable group table formulas generalize to an arbitrary number of outgoing compartments -- however, this is not shown here.</p>
</li>
<li>
<p>Note that Poisson is not included in the above table. Recall the splitting property of Poisson processes. If the total outflow (going to either compartment, <span class="arithmatex">\(\texttt{C}_1\)</span> or <span class="arithmatex">\(\texttt{C}_2\)</span>) is Poisson, we can split the process into two independent Poisson processes. So joint sampling is not actually needed. </p>
</li>
<li>
<p>In contrast, the binomial distribution does not have such a splitting property. If the total outflow is binomial with parameters <span class="arithmatex">\(n\)</span> and <span class="arithmatex">\(p\)</span>, then we cannot use a similar Poisson splitting technique to create two independent binomial random variables with the same number of trial parameters <span class="arithmatex">\(n\)</span>. Thus, joint sampling is needed. </p>
</li>
<li>
<p>An advantage of binomial/multinomial transition variables (with joint sampling when there are multiple outflows from a compartment) is that we cannot have more people leaving the origin compartment than are actually in the compartment. We set the "number of trials" parameter in the multinomial distribution to be the current number of people in the compartment. This is <strong><em>NOT</em></strong> the case for Poisson transition variables, which are unbounded! Thus, we recommend using binomial/multinomial transition types.</p>
</li>
<li>
<p>See <code>update_compartments</code> method in <code>clt_toolkit / base_components.py / MetapopModel</code> for details on how we adjust compartment values for deterministic implementations. Note that the stochastic transitions have realizations that are always integer, and due to multinomial sampling (see previous point), the compartments are always nonnegative. With any of our deterministic transitions, our transitions are not guaranteed to be integer, and our compartments are not guaranteed to be nonnegative. With deterministic transitions, we apply a "softplus" function (a smooth approximation to the ReLU function) to all compartment values of all compartments. This makes compartments nonnegative. </p>
</li>
<li>
<p>For the binomial/multinomial Taylor approximation transition type, if the simulation discretization parameter <span class="arithmatex">\(\Delta t\)</span> is too large, then it is possible for the "probability parameter" to be nonsensical. For example, in the table above, it is possible for <span class="arithmatex">\(r_1 \Delta t &gt; 1\)</span> or <span class="arithmatex">\(r_2 \Delta t &gt; 1\)</span> if <span class="arithmatex">\(\Delta t\)</span> is not sufficiently small. Similarly, it is possible for <span class="arithmatex">\(1 - (r_1 + r_2) \Delta t &lt; 0\)</span> if <span class="arithmatex">\(\Delta t\)</span> is not sufficiently small. Thus, we cannot use these values as probabilities input for the binomial distribution. As a result, we recommend using the binomial transition type with no Taylor approximation. This transition type converts rates into probabilities that are always between <span class="arithmatex">\([0,1]\)</span> and thus always well-defined to be input as a probability parameter in a binomial distribution.</p>
</li>
</ul>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": ["toc.integrate"], "search": "../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.83f73b43.min.js"></script>
      
        <script src="../javascripts/mathjax.js"></script>
      
        <script src="https://unpkg.com/mathjax@3/es5/tex-mml-chtml.js"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/katex@0.13.13/dist/katex.min.js"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/katex@0.13.13/dist/contrib/auto-render.min.js"></script>
      
    
  </body>
</html>